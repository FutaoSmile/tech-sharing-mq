## 集群搭建

* 集群中的所有节点都会备份所有的元数据，包括
    * 队列元数据：名称及属性。
    * 交换器： 名称及属性。
    * 绑定关系： 所有绑定关系
    * vhost元数据：vhost内的队列，交换机和绑定关系和安全属性。

**但是就算将exchange/queue/message都设置为持久化，在MQ节点崩溃后，响应在该节点上的所有消息都将丢失（除非使用镜像模式）。**

* 崩溃之后集群将在另外一个节点创建Exchange/queue/binding，但是消息都丢失了。

### 多机多节点配置

> Rabbitmq集群对延迟非常敏感，所以集群模式应当只在局域网环境下使用。在广域网中应该使用Federation或者Shovel代替。

